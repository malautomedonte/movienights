<div class="container-user-page-details">
  <div class="user-details-page-profile-others">
    <div class="user-card-details-profile-others d-flex align-items-center justify-content-center">
      <div class="picture-card ms-5">
        <% if @user.photo.attached? %>
          <%= cl_image_tag @user.photo.key, class: "picture-card-profile-img" %>
          <% else %>
            <%= image_tag "default_avatar.jpeg", alt: "User Image", class: "picture-card-img-profile-others rounded-circle"%>
        <% end %>
      </div>
      <div class="user-infos ms-3">
        <div class="title-page-profile-others">
          <h2><%= User.find_by(id: params[:id]).username %>'s Profile</h2>
        </div>
        <div class="add-friend profile-others mt-3">
          <%= link_to "Add as a Friend", friendships_path(friend_id: @user.id), data: { turbo_method: :post }, class: "btn-regular btn-secondary btn-size-s"  %>
        </div>
      </div>
    </div>
  </div>
  <div class="user-preferences-page">
    <div class="user-preferences-card">
      <div class="user-preferences-genres">
        <h2><%= User.find_by(id: params[:id]).username %>'s Favorite genres</h2>
          <p><%= @user.genres.pluck(:title).join(', ') %></p>
      </div>
      <div class="user-preferences-directors">
        <h2><%= User.find_by(id: params[:id]).username %>'s Favorite Directors</h2>
          <p><%= @user.directors.pluck(:last_name).join(', ') %></p>
      </div>
      <div class="user-preferences-actors">
        <h2><%= User.find_by(id: params[:id]).username %>'s Favorite Actors</h2>
          <p><%= @user.actors.pluck(:last_name).join(', ') %></p>
      </div>
    </div>
  </div>
</div>

<div class="user-watchlist page">
  <div class="background_movies p-4">
    <section class="movie-recommendations">
      <header class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-white"><%= User.find_by(id: params[:id]).username %>'s Watchlist</h2>
        <a href="#" class="see-all text-white">See All <i class="fas fa-arrow-right"></i></a>
      </header>
      <div class="movies-horizontal-list d-flex align-items-center"  data-controller="scroll">
        <button class="scroll-button left" data-action="click->scroll#scrollLeft">
          <i class="fas fa-chevron-left"></i>
        </button>
        <% if @user.preferred_content.present? %>
          <% @user.preferred_content.each do |movie| %>
            <div class="movie-card card mr-3">
              <%= image_tag movie.poster_url, class: "card-img-top rounded" %>
              <div class="card-body">
                <h5 class="card-title text-white"><%= movie.title %></h5>
              </div>
            </div>
          <% end %>
        <% else %>
          <h2 class="text-white">
            <em>Sorry, there's no movie recommendation yet.</em>
          </h2>
        <% end %>
        <button class="scroll-button right" data-action="click->scroll#scrollRight">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </section>
  </div>
</div>
