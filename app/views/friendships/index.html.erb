<header class="header-friends-list flex space-between center-vertically m-y-32 m-r-64 p-x-64">
  <h1 id="title-friends-list">Your Friends, <%= current_user.username %>! ğŸ‘¯â€â™€ï¸</h1>
</header>

<div class="container-friends-list">
  <% if @friends.any? %>
    <div class="wrappemall">
      <% @friends.each do |friendship| %>
        <% friend = friendship.friend == current_user ? friendship.user : friendship.friend %>
        <div class="user-card flex flex-wrap">
          <% if friend.photo.attached? %>
            <%= cl_image_tag friend.photo.key, class: "avatar" %>
          <% else %>
            <%= image_tag "default_avatar.jpeg", alt: "User Image", class: "avatar"%>
          <% end %>
          <div class="text m-b-8">
            <h3><%= link_to friend.username, profile_path(friend) %></h3>
            <p class="m-0"><%= friend.directors.pluck(:last_name).join(', ') %></p>
            <p class="m-0"><%= friend.actors.pluck(:last_name).join(', ') %></p>
            <p class="m-0"><%= friend.reviews.count %> movies reviewed</p>
            <p class="m-0"><%= friend.events.count %> events attended</p>
            <p class="m-0">Has <%= friend.friends.count %> friends</p>
            <ul class="display-inline ul-style-none w-100">
              <% friend.genres.pluck(:title).each do |title| %>
                <li class="m-t-8"><span class="tag"><%= title %></span></li>
              <% end %>
              <hr class="friends-list-hr">
            </ul>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <em>No users with similar preferences found.</em>
  <% end %>
</div>
</div>
